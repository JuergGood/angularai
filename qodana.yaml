#-------------------------------------------------------------------------------#
#               Qodana analysis is configured by qodana.yaml file               #
#             https://www.jetbrains.com/help/qodana/qodana-yaml.html            #
#-------------------------------------------------------------------------------#

#################################################################################
#              WARNING: Do not store sensitive information in this file,        #
#               as its contents will be included in the Qodana report.          #
#################################################################################
version: "1.0"

#Specify inspection profile for code analysis
profile:
  name: qodana.starter

#Enable inspections
#include:
#  - name: <SomeEnabledInspectionId>

#Exclude paths from analysis
exclude:
  - name: All
    paths:
      - scripts/

projectJDK: "25" #(Applied in CI/CD pipeline)

#Execute shell command before Qodana execution (Applied in CI/CD pipeline)
#bootstrap: (python3 -m pip install --user -r scripts/requirements.txt --break-system-packages || (python3 -m ensurepip --user && python3 -m pip install --user -r scripts/requirements.txt --break-system-packages))

#Install IDE plugins before Qodana execution (Applied in CI/CD pipeline)
#plugins:
#  - id: <plugin.id> #(plugin id can be found at https://plugins.jetbrains.com)

# Specify coverage reports
coverage:
  reportProblems: true
  reports:
    - path: backend/target/site/jacoco/jacoco.xml
    - path: test-client/target/site/jacoco/jacoco.xml
    - path: frontend/coverage/lcov.info

# Quality gate. Will fail the CI/CD pipeline if any condition is not met
# severityThresholds - configures maximum thresholds for different problem severities
# testCoverageThresholds - configures minimum code coverage on a whole project and newly added code
failureConditions:
  severityThresholds:
    any: 15
    critical: 5
  testCoverageThresholds:
    total: 50

# Specify Qodana linter for analysis (Applied in CI/CD pipeline)
linter: jetbrains/qodana-jvm:2024.3
# Use Ultimate linter to support coverage reports. Requires QODANA_TOKEN.
